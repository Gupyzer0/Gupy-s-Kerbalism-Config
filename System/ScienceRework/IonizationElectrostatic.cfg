// ============================================================================
// Ionization and Electrostatic Analysis
// ============================================================================

// ----------------------------------------------------------------------------
// Experiment Values
// ----------------------------------------------------------------------------

@KERBALISM_EXPERIMENT_VALUES:NEEDS[FeatureScience]
{
	%SPACELINES
	{
        Spacelines_IonizationElectrostatic
		{
			ECCost = 0.05
			size = 1.5 						
			value = 5								
			duration = 3600
			requirements =
			ResourceRates =
			CrewRequirement = 
		}
    }
}

EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = Spacelines_IonizationElectrostatic
	title = Ionization and Electrostatic Analysis
	baseValue = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_IonizationElectrostatic/value$
	dataScale = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_IonizationElectrostatic/size$
	@dataScale /= #$baseValue$
	scienceCap = 5
	requireAtmosphere = False
	situationMask = 56
	biomeMask = 1

    RESULTS
    {
        default = You measure the electrical properties of the atmosphere, looking for ionized atoms and molecules.
        default = The instrument searches from ionized particles in the atmosphere.
        default = Ionization and electrostatic data is recorded.
    }

    KERBALISM_EXPERIMENT 
	{
		VirtualBiome = NoBiome
		VirtualBiome = InnerBelt
		VirtualBiome = OuterBelt
		VirtualBiome = Magnetosphere
		VirtualBiome = Storm
		
		Situation = FlyingHigh
		Situation = Space@VirtualBiomes
	}
}

// ----------------------------------------------------------------------------
// Replacing Experiments with our own experiment
// ----------------------------------------------------------------------------

// Experiment module
@PART[*]:HAS[#Tag_Spacelines_IonizationElectrostatic[True]]:NEEDS[FeatureScience] {
    MODULE
	{
		name = Experiment
		experiment_id = Spacelines_IonizationElectrostatic
	}
}

// Setting Experiment Values
@PART[*]:HAS[#Tag_Spacelines_IonizationElectrostatic[True]]:NEEDS[FeatureScience] {
    @MODULE[Experiment]:HAS[#experiment_id[Spacelines_IonizationElectrostatic]] {
		%ec_rate = #$@KERBALISM_EXPERIMENT_VALUES/SPACELINES/Spacelines_IonizationElectrostatic/ECCost$
		%crew_operate = #$@KERBALISM_EXPERIMENT_VALUES/SPACELINES/Spacelines_IonizationElectrostatic/CrewRequirement$
		%requires = #$@KERBALISM_EXPERIMENT_VALUES/SPACELINES/Spacelines_IonizationElectrostatic/requirements$
		%data_rate = #$@KERBALISM_EXPERIMENT_VALUES/SPACELINES/Spacelines_IonizationElectrostatic/size$
		@data_rate /= #$@KERBALISM_EXPERIMENT_VALUES/SPACELINES/Spacelines_IonizationElectrostatic/duration$
		%resources = #$@KERBALISM_EXPERIMENT_VALUES/SPACELINES/Spacelines_IonizationElectrostatic/ResourceRates$

		%experimentLength = #$@KERBALISM_EXPERIMENT_VALUES/SPACELINES/Spacelines_IonizationElectrostatic/duration$
		%experimentSize = #$@KERBALISM_EXPERIMENT_VALUES/SPACELINES/Spacelines_IonizationElectrostatic/size$
	}
}


// ----------------------------------------------------------------------------
// Animations
// ----------------------------------------------------------------------------

@PART[*]:HAS[#Tag_Spacelines_IonizationElectrostatic[True]],@MODULE:HAS[#animationName]]:NEEDS[FeatureScience]
{
	@MODULE[Experiment],*
	{
		%anim_deploy = #$../MODULE:HAS[#animationName,~name[Experiment]]/animationName$
	}
}
