// ============================================================================
// Solar Observations Experiments
// ============================================================================

// ----------------------------------------------------------------------------
// Experiment Values
// ----------------------------------------------------------------------------

@KERBALISM_GROUP_SETTINGS:NEEDS[FeatureScience]
{
	%SPACELINES
	{   
        Spacelines_Oso
        {
            ECCost = 0.05	
            size = 190 						
            value = 75
            duration = 2592000 // 30d
            UnlockTech = 
            requirements = Sunlight
            ResourceRates =
            CrewRequirement =
        }

        Spacelines_Atm
        {
            ECCost = 0.075
            size = 1917						
            value = 295
            duration = 3888000 // 45d		
            requirements = CrewMin:2,Sunlight
            ResourceRates =
            CrewRequirement = Scientist
        }
    }
}

// ----------------------------------------------------------------------------
// Science Definitions 
// ----------------------------------------------------------------------------

EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = Spacelines_Oso
	title = Orbital Sun Observations
	
	scienceCap = 75
	baseValue = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Oso/value$
	dataScale = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Oso/size$
	@dataScale /= #$baseValue$

	RESULTS
	{
        default = Data from a variety of solar sensors is recorded to be sent back to Kerbin.
        default = Readings confirm that Kerbol is, indeed, hot.
	}

    KERBALISM_EXPERIMENT
	{
		Situation = Space
		BodyNotAllowed = Suns
	}
}

EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = Spacelines_Atm
	title = Solar Telescope Mount
	
	scienceCap = 295
	baseValue = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Atm/value$
	dataScale = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Atm/size$
	@dataScale /= #$baseValue$

	RESULTS
	{
        default = Collected high resolution images of the Sun.
		default = These photos almost suggest there's a... a hole in the corona of the Sun.
		default = An enormous prominence stretches out of the Sun. Our home is but a speck compared to it.
		default = Collected H-alpha measurements of the Sun's chromosphere during a solar flare.
	}

    KERBALISM_EXPERIMENT
	{
        IncludeExperiment = Spacelines_Oso
		Situation = Space
		BodyNotAllowed = Suns
	}
}

// ----------------------------------------------------------------------------
// Replacing Experiments with our own experiment
// ----------------------------------------------------------------------------

@PART[*]:HAS[#Tag_Spacelines_Oso[True]]:NEEDS[FeatureScience] {
	MODULE
    {
        name = Experiment
        experiment_id = Spacelines_Oso
    }
}

@PART[*]:HAS[#Tag_Spacelines_Atm[True]]:NEEDS[FeatureScience] {
	MODULE
    {
        name = Experiment
        experiment_id = Spacelines_Atm
    }
}

// Setting Experiment Values

@PART[*]:HAS[#Tag_Spacelines_Oso[True]]:NEEDS[FeatureScience] {
    @MODULE[Experiment]:HAS[#experiment_id[Spacelines_Oso]] {
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Oso/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Oso/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Oso/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Oso/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Oso/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Oso/ResourceRates$
		
		%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Oso/duration$
		%experimentSize = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Oso/size$
		
    }
}

@PART[*]:HAS[#Tag_Spacelines_Atm[True]]:NEEDS[FeatureScience] {
    @MODULE[Experiment]:HAS[#experiment_id[Spacelines_Atm]] {
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Atm/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Atm/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Atm/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Atm/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Atm/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Atm/ResourceRates$
		
		%experimentLength = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Atm/duration$
		%experimentSize = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_Atm/size$
		
    }
}

// ----------------------------------------------------------------------------
// Animations
// ----------------------------------------------------------------------------
@PART[*]:HAS[#Tag_Spacelines_Oso[True],@MODULE:HAS[#animationName]]:NEEDS[FeatureScience]
{
	@MODULE[Experiment],*
	{
		%anim_deploy = #$../MODULE:HAS[#animationName,~name[Experiment]]/animationName$
	}
}

@PART[*]:HAS[#Tag_Spacelines_Atm[True],@MODULE:HAS[#animationName]]:NEEDS[FeatureScience]
{
	@MODULE[Experiment],*
	{
		%anim_deploy = #$../MODULE:HAS[#animationName,~name[Experiment]]/animationName$
	}
}
