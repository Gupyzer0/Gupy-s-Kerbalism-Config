// ============================================================================
// Visible Imaging (TV Cameras)
// ============================================================================

// ----------------------------------------------------------------------------
// Experiment Values
// ----------------------------------------------------------------------------
@KERBALISM_GROUP_SETTINGS:NEEDS[FeatureScience]
{
	%SPACELINES
	{
        Spacelines_VisibleImaging1
        {
            ECCost = 0.005
			size = 0.01
			value = 1.5
			SetupMass = 
			SetupCost = 	
			duration = 1200 // 20 minutes
			UnlockTech = 
			requirements = 
			ResourceRates = 
			CrewRequirement = 
        }

        Spacelines_VisibleImaging2
        {
            ECCost = 0.008
			size = 0.5
			value = 2
			SetupMass = 
			SetupCost = 	
			duration = 3600 // 1 hour
			UnlockTech = 
			requirements = 
			ResourceRates = 
			CrewRequirement = 
        }

        Spacelines_VisibleImaging3
        {
            ECCost = 0.02
			size = 20
			value = 3
			SetupMass = 
			SetupCost = 	
			duration = 7200 // 2 hours
			UnlockTech = 
			requirements = 
			ResourceRates = 
			CrewRequirement = 
        }

        Spacelines_VisibleImaging4
        {
            ECCost = 0.03
			size = 725
			value = 6
			SetupMass = 
			SetupCost = 	
			duration = 7200 // 2 hours
			UnlockTech = 
			requirements = 
			ResourceRates = 
			CrewRequirement = 
        }

        Spacelines_VisibleImaging5
        {
            ECCost = 0.06
			size = 86400
			value = 50
			SetupMass = 
			SetupCost = 	
			duration = 86400 // 24 hours
			UnlockTech = 
			requirements = 
			ResourceRates = 
			CrewRequirement = 
        }
    }
}

// ----------------------------------------------------------------------------
// Kerbalism Config
// ----------------------------------------------------------------------------
@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_VisibleImaging1]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
    @baseValue = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging1/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging1/size$
	@dataScale /= #$baseValue$

    KERBALISM_EXPERIMENT
    {
		// sample mass in tons. if undefined or 0, the experiment produce a file
		SampleMass = 0
		IncludeExperiment = 
    }
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_VisibleImaging2]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
    @baseValue = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging2/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging2/size$
	@dataScale /= #$baseValue$
    
    KERBALISM_EXPERIMENT
    {
		// sample mass in tons. if undefined or 0, the experiment produce a file
		SampleMass = 
		IncludeExperiment = Spacelines_VisibleImaging1
    }
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_VisibleImaging3]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
    @baseValue = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging3/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging3/size$
	@dataScale /= #$baseValue$

    KERBALISM_EXPERIMENT
    {
		// sample mass in tons. if undefined or 0, the experiment produce a file
		SampleMass = 0
		IncludeExperiment = Spacelines_VisibleImaging2
    }
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_VisibleImaging4]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
    @baseValue = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging4/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging4/size$
	@dataScale /= #$baseValue$

    KERBALISM_EXPERIMENT
    {
		// sample mass in tons. if undefined or 0, the experiment produce a file
		SampleMass = 0
		IncludeExperiment = Spacelines_VisibleImaging3
    }
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_VisibleImaging5]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
    @baseValue = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging5/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging5/size$
	@dataScale /= #$baseValue$

    KERBALISM_EXPERIMENT
    {
		// sample mass in tons. if undefined or 0, the experiment produce a file
		SampleMass = 0
		IncludeExperiment = Spacelines_VisibleImaging4
    }
}

// ----------------------------------------------------------------------------
// Replacing Experiments with our own experiment
// ----------------------------------------------------------------------------

@PART[*]:HAS[#Tag_Spacelines_VisibleImaging1[True]]:NEEDS[FeatureScience]:FOR[zzzKerbalismDefault] {
	MODULE
    {
        name = Experiment
        experiment_id = Spacelines_VisibleImaging1
    }
}

@PART[*]:HAS[#Tag_Spacelines_VisibleImaging2[True]]:NEEDS[FeatureScience]:FOR[zzzKerbalismDefault] {
	MODULE
    {
        name = Experiment
        experiment_id = Spacelines_VisibleImaging2
    }
}

@PART[*]:HAS[#Tag_Spacelines_VisibleImaging3[True]]:NEEDS[FeatureScience]:FOR[zzzKerbalismDefault] {
	MODULE
    {
        name = Experiment
        experiment_id = Spacelines_VisibleImaging3
    }
}

@PART[*]:HAS[#Tag_Spacelines_VisibleImaging4[True]]:NEEDS[FeatureScience]:FOR[zzzKerbalismDefault] {
	MODULE
    {
        name = Experiment
        experiment_id = Spacelines_VisibleImaging4
    }
}

@PART[*]:HAS[#Tag_Spacelines_VisibleImaging5[True]]:NEEDS[FeatureScience]:FOR[zzzKerbalismDefault] {
	MODULE
    {
        name = Experiment
        experiment_id = Spacelines_VisibleImaging5
    }
}

// ----------------------------------------------------------------------------
// Experiments Reconfiguration
// ----------------------------------------------------------------------------
@PART[*]:HAS[@MODULE[Experiment]]:AFTER[zzzKerbalismDefault]
{
	@MODULE[Experiment]:HAS[#experiment_id[Spacelines_VisibleImaging1]]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging1/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging1/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging1/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging1/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging1/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging1/ResourceRates$
		%allow_shrouded = False
	}

    @MODULE[Experiment]:HAS[#experiment_id[Spacelines_VisibleImaging2]]:AFTER[zzzKerbalismDefault]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging2/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging2/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging2/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging2/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging2/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging2/ResourceRates$
		%allow_shrouded = False
	}

    @MODULE[Experiment]:HAS[#experiment_id[Spacelines_VisibleImaging3]]:AFTER[zzzKerbalismDefault]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging3/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging3/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging3/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging3/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging3/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging3/ResourceRates$
		%allow_shrouded = False
	}

    @MODULE[Experiment]:HAS[#experiment_id[Spacelines_VisibleImaging4]]:AFTER[zzzKerbalismDefault]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging4/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging4/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging4/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging4/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging4/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging4/ResourceRates$
		%allow_shrouded = False
	}

    @MODULE[Experiment]:HAS[#experiment_id[Spacelines_VisibleImaging5]]:AFTER[zzzKerbalismDefault]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging5/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging5/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging5/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging5/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging5/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/SPACELINES/Spacelines_VisibleImaging5/ResourceRates$
		%allow_shrouded = False
	}
}

// ----------------------------------------------------------------------------
// Animations
// ----------------------------------------------------------------------------
@PART[*]:HAS[#Tag_Spacelines_VisibleImaging1[True],@MODULE:HAS[#animationName]]:NEEDS[FeatureScience]
{
	@MODULE[Experiment],*
	{
		%anim_deploy = #$../MODULE:HAS[#animationName,~name[Experiment]]/animationName$
	}
}
@PART[*]:HAS[#Tag_Spacelines_VisibleImaging2[True],@MODULE:HAS[#animationName]]:NEEDS[FeatureScience]
{
	@MODULE[Experiment],*
	{
		%anim_deploy = #$../MODULE:HAS[#animationName,~name[Experiment]]/animationName$
	}
}
@PART[*]:HAS[#Tag_Spacelines_VisibleImaging3[True],@MODULE:HAS[#animationName]]:NEEDS[FeatureScience]
{
	@MODULE[Experiment],*
	{
		%anim_deploy = #$../MODULE:HAS[#animationName,~name[Experiment]]/animationName$
	}
}
@PART[*]:HAS[#Tag_Spacelines_VisibleImaging4[True],@MODULE:HAS[#animationName]]:NEEDS[FeatureScience]
{
	@MODULE[Experiment],*
	{
		%anim_deploy = #$../MODULE:HAS[#animationName,~name[Experiment]]/animationName$
	}
}
@PART[*]:HAS[#Tag_Spacelines_VisibleImaging5[True],@MODULE:HAS[#animationName]]:NEEDS[FeatureScience]
{
	@MODULE[Experiment],*
	{
		%anim_deploy = #$../MODULE:HAS[#animationName,~name[Experiment]]/animationName$
	}
}
