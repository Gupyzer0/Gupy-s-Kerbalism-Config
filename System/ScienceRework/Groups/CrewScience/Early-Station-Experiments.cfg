// ----------------------------------------------------------------------------
// Early Stations -> Skylab / Salyut
// ----------------------------------------------------------------------------
@KERBALISM_GROUP_SETTINGS:NEEDS[FeatureScience]
{
	LAB_EXPERIMENTS
	{
		Spacelines_LongDurationHabit2
		{
			ECCost = 0.5
			size = 50
			value = 1500
			duration = 63072000 // 2 years
			SetupMass = 0
			SetupCost = 
			UnlockTech = spaceStations8
			requirements = CrewMin:3
			ResourceRates = 
			CrewRequirement = True
		}

		Spacelines_NuclearEmulsion
		{
			ECCost = 0.015
			size = 1
			value = 200
			duration = 1814400 // 21 days
			SetupMass = 
			SetupCost = 
			UnlockTech = spaceStations8
			requirements = CrewMin:3
			ResourceRates =
			CrewRequirement = True
		}

		Spacelines_UVAirglowHorizonPhotography
		{
			ECCost = 0.1
			size = 1
			value = 200
			duration = 2592000 // 30 days
			SetupMass = 
			SetupCost = 
			UnlockTech = spaceStations8
			requirements = CrewMin:3,SunAngleMin:0,SunAngleMax:60
			ResourceRates =
			CrewRequirement = True
		}

		Spacelines_ParticleCollection
		{
			ECCost = 0.116
			size = 1
			value = 200
			duration = 2592000 // 30 days
			SetupMass = 
			SetupCost = 
			UnlockTech = spaceStations8
			requirements = CrewMin:3
			ResourceRates =
			CrewRequirement = True
		}

		Spacelines_GnatMiceCircadianRhythm
		{
			ECCost = 0.120
			size = 1
			value = 200
			duration = 2419200 // 28 days
			SetupMass = 
			SetupCost = 
			UnlockTech = spaceStations8
			requirements = CrewMin:3
			ResourceRates =
			CrewRequirement = True
		}

		Spacelines_GalacticXRayMapping
		{
			ECCost = 0.5
			size = 1
			value = 200
			duration = 2592000 // 30 days
			SetupMass = 
			SetupCost = 
			UnlockTech = spaceStations8
			requirements = CrewMin:3
			ResourceRates =
			CrewRequirement = True
		}

		Spacelines_ZeroGFlammability
		{
			ECCost = 0.028
			size = 1
			value = 200
			duration = 18000 // 5 hours
			SetupMass = 
			SetupCost = 
			UnlockTech = spaceStations8
			requirements = CrewMin:3
			ResourceRates =
			CrewRequirement = True
		}

		Spacelines_CompositeCasting
		{
			ECCost = 0.1
			size = 1
			value = 100
			duration = 21600 // 6 hours
			SetupMass = 
			SetupCost = 
			UnlockTech = spaceStations8
			requirements = CrewMin:3
			ResourceRates =
			CrewRequirement = True
		}

		Spacelines_GalliumArsenideCrystalGrowth
		{
			ECCost = 0.1
			size = 1
			value = 200
			duration = 414000 // 115 hours
			SetupMass = 
			SetupCost = 
			UnlockTech = spaceStations8
			requirements = CrewMin:3
			ResourceRates =
			CrewRequirement = True
		}

		Spacelines_EarthResourcesExperimentPackage
		{
			ECCost = 1.1
			size = 1
			value = 200
			duration = 7776000 // 90 days
			SetupMass = 
			SetupCost = 
			UnlockTech = spaceStations8
			requirements = CrewMin:3
			ResourceRates =
			CrewRequirement = True
		}		
	}
}

// ----------------------------------------------------------------------------
// Kerbalism Config
// ----------------------------------------------------------------------------

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_LongDurationHabit2]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_LongDurationHabit2/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_LongDurationHabit2/size$
	@dataScale /= #$baseValue$

  	KERBALISM_EXPERIMENT
	{
		SampleMass = 0
		
		BodyAllowed = HomeBody
		Situation = Space
		IncludeExperiment = Spacelines_LongDurationHabit1
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_NuclearEmulsion]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_NuclearEmulsion/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_NuclearEmulsion/size$
	@dataScale /= #$baseValue$

  	KERBALISM_EXPERIMENT
	{
		SampleMass = 0
		
		BodyAllowed = HomeBody
		Situation = InSpaceLow
		IncludeExperiment =
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_UVAirglowHorizonPhotography]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_UVAirglowHorizonPhotography/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_UVAirglowHorizonPhotography/size$
	@dataScale /= #$baseValue$

  	KERBALISM_EXPERIMENT
	{
		SampleMass = 0
		
		BodyAllowed = HomeBody
		Situation = InSpaceLow
		IncludeExperiment =
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_ParticleCollection]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_ParticleCollection/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_ParticleCollection/size$
	@dataScale /= #$baseValue$

  	KERBALISM_EXPERIMENT
	{
		SampleMass = 0.005 
		
		BodyAllowed = HomeBody
		Situation = InSpaceLow
		IncludeExperiment = 
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_GnatMiceCircadianRhythm]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GnatMiceCircadianRhythm/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GnatMiceCircadianRhythm/size$
	@dataScale /= #$baseValue$

  	KERBALISM_EXPERIMENT
	{
		SampleMass = 0
		
		BodyAllowed = HomeBody
		Situation = InSpaceLow
		IncludeExperiment =
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_GalacticXRayMapping]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GalacticXRayMapping/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GalacticXRayMapping/size$
	@dataScale /= #$baseValue$

  	KERBALISM_EXPERIMENT
	{
		SampleMass = 0
		
		BodyAllowed = HomeBody
		Situation = InSpaceLow
		IncludeExperiment =
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_ZeroGFlammability]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_ZeroGFlammability/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_ZeroGFlammability/size$
	@dataScale /= #$baseValue$

  	KERBALISM_EXPERIMENT
	{
		SampleMass = 0
		
		BodyAllowed = HomeBody
		Situation = InSpaceLow
		IncludeExperiment =
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_CompositeCasting]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_CompositeCasting/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_CompositeCasting/size$
	@dataScale /= #$baseValue$

  	KERBALISM_EXPERIMENT
	{
		SampleMass = 0.05 

		BodyAllowed = HomeBody
		Situation = InSpaceLow
		IncludeExperiment = 
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_GalliumArsenideCrystalGrowth]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GalliumArsenideCrystalGrowth/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GalliumArsenideCrystalGrowth/size$
	@dataScale /= #$baseValue$

  	KERBALISM_EXPERIMENT
	{
		SampleMass = 0.005 

		BodyAllowed = HomeBody
		Situation = InSpaceLow
		IncludeExperiment = 
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[Spacelines_EarthResourcesExperimentPackage]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_EarthResourcesExperimentPackage/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_EarthResourcesExperimentPackage/size$
	@dataScale /= #$baseValue$

  	KERBALISM_EXPERIMENT
	{
		SampleMass = 0
		
		BodyAllowed = HomeBody
		Situation = InSpaceLow
		IncludeExperiment =
	}
}

// Tagging parts
@PART[*]:HAS[#SSS_Tier[<10],#SK_LabExperiments[True]]:AFTER[zzzKerbalismDefault]
{
	%capsuleTier = EarlyStation
}

// Configure
@PART[*]:HAS[#capsuleTier[EarlyStation]]:NEEDS[FeatureScience]:AFTER[zzzKerbalismDefault]
{
	@MODULE[Configure]:HAS[#title[Crew?Science]]
	{
		SETUP
		{
			name = Multi-Month Space Habitation
			desc = To further analyze the health of humans in space over an extended period of time. <b>NOTE: This experiment takes 2 years and consumes 750L of Research Payload every 30 days.</b>
			
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = Spacelines_LongDurationHabit2
			}
		}

		SETUP
		{
			name = Nuclear Emulsion
			desc = To utilize an emulsion consisting of silver-halide crystals in gelatin to identify atomic nuclei in cosmic rays <b>NOTE: This experiment takes 21 days.</b>
			
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = Spacelines_NuclearEmulsion
			}
		}

		SETUP
		{
			name = UV Airglow Horizon Photography
			desc = To analyze airglow in the upper atmosphere in the UV spectrum<b>NOTE: This experiment takes 30 days.</b>
			
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = Spacelines_UVAirglowHorizonPhotography
			}
		}

		SETUP
		{
			name = Particle Collection
			desc = <b>NOTE: This experiment takes 30 days.</b>
						
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = Spacelines_ParticleCollection
			}
		}

		SETUP
		{
			name = Circadian Rhythm of Gnats and Mice
			desc = <b>NOTE: This experiment takes 28 days.</b>
			
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = Spacelines_GnatMiceCircadianRhythm
			}
		}

		SETUP
		{
			name = Galactic X-Ray Mapping
			desc = <b>NOTE: This experiment takes 30 days.</b>
			
			MODULE
			{
			  type = Experiment
			  id_field = experiment_id
			  id_value = Spacelines_GalacticXRayMapping
			}
		}

		SETUP
		{
			name = Zero-G Flammability
			desc = <b>NOTE: This experiment takes 5 hours.</b>
			
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = Spacelines_ZeroGFlammability
			}
		}

		SETUP
		{
			name = Composite Casting
			desc = To fabricate a lamellar eutetic composite in the absence of thermal convection<b>NOTE: This experiment takes 6 hours.</b> //Placeholder Text
			
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = Spacelines_CompositeCasting
			}
		}

		SETUP
		{
			name = Gallium Arsenide Crystal Growth
			desc = To determine the effects of zero-G on the growth of Gallium Arsenide Crystals<b>NOTE: This experiment takes 115 hours.</b> //Placeholder Text
			
			MODULE
			{
				type = Experiment
				id_field = experiment_id
				id_value = Spacelines_GalliumArsenideCrystalGrowth
			}
		}

		SETUP
		{
			name = Earth Resources Experiment Package
			desc = <b>NOTE: This experiment takes 90 days.</b>
			
			MODULE
			{
			  type = Experiment
			  id_field = experiment_id
			  id_value = Spacelines_EarthResourcesExperimentPackage
			}
		}
	}
}

// Experiment values
@PART[*]:HAS[#capsuleTier[EarlyStation]:NEEDS[FeatureScience]:AFTER[zzzKerbalismDefault]
{
	@SETUP:HAS[#name[Multi-Month?Space?Habitation]]
	{
		cost = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_LongDurationHabit2/SetupCost
		mass = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_LongDurationHabit2/SetupMass
		tech = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_LongDurationHabit2/UnlockTech
	}

	@SETUP:HAS[#name[Nuclear?Emulsion]]
	{
		cost = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_NuclearEmulsion/SetupCost
		mass = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_NuclearEmulsion/SetupMass
		tech = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_NuclearEmulsion/UnlockTech
	}

	@SETUP:HAS[#name[UV?Airglow?Horizon?Photography]]
	{
		cost = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_UVAirglowHorizonPhotography/SetupCost
		mass = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_UVAirglowHorizonPhotography/SetupMass
		tech = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_UVAirglowHorizonPhotography/UnlockTech
	}

	@SETUP:HAS[#name[Particle?Collection]]
	{
		cost = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_ParticleCollection/SetupCost
		mass = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_ParticleCollection/SetupMass
		tech = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_ParticleCollection/UnlockTech
	}

	@SETUP:HAS[#name[Circadian?Rhythm?of?Gnats?and?Mice]]
	{
		cost = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GnatMiceCircadianRhythm/SetupCost
		mass = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GnatMiceCircadianRhythm/SetupMass
		tech = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GnatMiceCircadianRhythm/UnlockTech
	}

	@SETUP:HAS[#name[Galactic?X-Ray?Mapping]]
	{
		cost = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GalacticXRayMapping/SetupCost
		mass = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GalacticXRayMapping/SetupMass
		tech = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GalacticXRayMapping/UnlockTech
	}

	@SETUP:HAS[#name[Zero-G?Flammability]]
	{
		cost = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_ZeroGFlammability/SetupCost
		mass = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_ZeroGFlammability/SetupMass
		tech = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_ZeroGFlammability/UnlockTech
	}

	@SETUP:HAS[#name[Composite?Casting]]
	{
		cost = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_CompositeCasting/SetupCost
		mass = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_CompositeCasting/SetupMass
		tech = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_CompositeCasting/UnlockTech
	}

	@SETUP:HAS[#name[Gallium?Arsenide?Crystal?Growth]]
	{
		cost = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GalliumArsenideCrystalGrowth/SetupCost
		mass = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GalliumArsenideCrystalGrowth/SetupMass
		tech = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_GalliumArsenideCrystalGrowth/UnlockTech
	}

	@SETUP:HAS[#name[Earth?Resources?Experiment?Package]]
	{
		cost = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_EarthResourcesExperimentPackage/SetupCost
		mass = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_EarthResourcesExperimentPackage/SetupMass
		tech = #$../../@KERBALISM_GROUP_SETTINGS/LAB_EXPERIMENTS/Spacelines_EarthResourcesExperimentPackage/UnlockTech
	}
}

@PART[*]:HAS[#capsuleTier[EarlyStation]]:AFTER[zzzKerbalismDefault]
{
    @MODULE[HardDrive]
	{
		@sampleCapacity += 7
	}
}