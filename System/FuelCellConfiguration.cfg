// ============================================================================
// Fuel Cell Configuration
// ============================================================================

// Adds fuelcell setups to parts with SK_FuelCell variable set to "True".
// Requires setting of the "FuelCellCapacity" variable.

@PART[*]:HAS[@MODULE[ModuleResourceConverter]:HAS[#ConverterName[Fuel?Cell]]]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
	// Removing BDB's default fuel cells including the B9 part switch for the fuel cells
	!MODULE[ModuleResourceConverter]:HAS[#ConverterName[Fuel?Cell]] {}
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelCellSwitch]] {}
}

@PART[*]:HAS[#SK_FuelCell[True]]:NEEDS[KerbalismDefault]:AFTER[KerbalismDefault]
{
	!MODULE[ModuleResourceConverter] {}

	MODULE
	{
		name = ProcessController
		resource = _KerbalismFuelCell
		title = KCELL
		capacity = #$/FuelCellCapacity$
		running = true
	}

	MODULE
	{
		name = ProcessController
		resource = _KerbalismLiquidFuelCell
		title = K LFCELL
		capacity = #$/FuelCellCapacity$
		running = true
	}

	MODULE
	{
		name = ProcessController
		resource = _FuelCellGemini
		title = Gemini Fuel Cell
		capacity = #$/FuelCellCapacity$
		running = true
	}

	MODULE
	{
		name = ProcessController
		resource = _FuelCell
		title = Apollo Fuel Cell
		capacity = #$/FuelCellCapacity$
		running = true
	}

	MODULE
	{
		name = ProcessController
		resource = _FuelCellShuttle
		title = Shuttle Fuel Cell
		capacity = #$/FuelCellCapacity$
		running = true
	}

	MODULE
	{
		name = ProcessController
		resource = _FuelCellVolna20
		title = Volna-20 Fuel Cell
		capacity = #$/FuelCellCapacity$
		running = true
	}

	MODULE
	{
		name = ProcessController
		resource = _FuelCellGas
		title = Gaseous Reactant Fuel Cell
		capacity = #$/FuelCellCapacity$
		running = true
	}

	MODULE
	{
		name = ProcessController
		resource = _FuelCellCH4
		title = CH4 Fuel Cell
		capacity = #$/FuelCellCapacity$
		running = true
	}

	MODULE
	{
		name = Configure
		title = Fuel Cell
		slots = 1

		SETUP //Gemini
		{
			name = K FCELL
			desc = Combines <b>LqdHydrogen</b> and <b>LqdOxygen</b> to produce <b>Water</b> and <b>Electricity</b>.
			tech = electrics6
			mass = 0.075

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _KerbalismFuelCell
			}
		}

		SETUP //Gemini
		{
			name = L K FCELL
			desc = Combines <b>LqdHydrogen</b> and <b>LqdOxygen</b> to produce <b>Water</b> and <b>Electricity</b>.
			tech = electrics6
			mass = 0.075

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _KerbalismLiquidFuelCell
			}
		}

		SETUP //Gemini
		{
			name = Acid IEM Fuel Cell
			desc = Combines <b>LqdHydrogen</b> and <b>LqdOxygen</b> to produce <b>Water</b> and <b>Electricity</b>.
			tech = electrics6
			mass = 0.075

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCellGemini
			}
		}

		SETUP //Apollo
		{
			name = Apollo alkaline Fuel Cell
			desc = Combines <b>LqdHydrogen</b> and <b>LqdOxygen</b> to produce <b>Water</b> and <b>Electricity</b>.
			tech = electrics7
			mass = 0.05625

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCell
			}
		}

		SETUP //Soyuz
		{
			name = Soyuz Volna-20 Fuel Cell
			desc = Combines <b>LqdHydrogen</b> and <b>LqdOxygen</b> to produce <b>Water</b> and <b>Electricity</b>.
			tech = electrics7
			mass = 0.070

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCellVolna20
			}
		}

		SETUP //AES A-C Fuel Cell
		{
			name = Gaseous Reactant Fuel Cell
			desc = Combines <b>Hydrogen</b> and <b>Oxygen</b> to produce <b>Water</b> and <b>Electricity</b>.
			tech = electrics7
			mass = 0.100

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCellGas
			}
		}

		SETUP //Shuttle
		{
			name = Shuttle alkaline Fuel Cell
			desc = Combines <b>LqdHydrogen</b> and <b>LqdOxygen</b> to produce <b>Water</b> and <b>Electricity</b>.
			tech = electrics8
			mass = 0.01125

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCellShuttle
			}
		}

		SETUP //CH4
		{
			name = CH4 Hydrocarbon Fuel Cell
			desc = Combines <b>LqdMethane</b> and <b>LqdOxygen</b> to produce <b>Water</b>, <b>Carbon Dioxide</b>, and <b>Electricity</b>.
			tech = electrics9
			mass = 0.01125

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCellCH4
			}
		}
 	}
}