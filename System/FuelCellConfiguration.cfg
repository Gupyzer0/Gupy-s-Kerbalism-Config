// ============================================================================
// Fuel Cell Configuration
// ============================================================================

// Adds fuelcell setups to parts with SK_FuelCell variable set to "True".
// Requires setting of the "FuelCellCapacity" variable.

@PART[*]:HAS[@MODULE[ModuleResourceConverter]:HAS[#ConverterName[Fuel?Cell]]]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
	// Removing BDB's default fuel cells including the B9 part switch for the fuel cells
	!MODULE[ModuleResourceConverter]:HAS[#ConverterName[Fuel?Cell]] {}
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelCellSwitch]] {}
}

@PART[*]:HAS[#SK_FuelCell[True]]:NEEDS[KerbalismDefault]:AFTER[KerbalismDefault]
{
	!MODULE[ModuleResourceConverter] {}

	MODULE
	{
		name = ProcessController
		resource = _FuelCell
		title = Fuel Cell
		capacity = #$/FuelCellCapacity$
		running = true
	}

	MODULE
	{
		name = ProcessController
		resource = _GasFuelCell
		title = Gaseous Reactants Fuel Cell
		capacity = #$/FuelCellCapacity$
		running = true
	}

	MODULE
	{
		name = Configure
		title = Fuel Cell
		slots = 1

		 SETUP
		{
			name = None
			desc = Empty slot for mass and cost savings.
		}

		SETUP
		{
			name = Fuel Cell
			desc = Combines <b>LqdHydrogen</b> and <b>LqdOxygen</b> to produce <b>Water</b> and <b>Electricity</b>.
			tech = electrics6
			mass = 0.075

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCell
			}
		}

		SETUP
		{
			name = Gaseous Reactants Fuel Cell
			desc = Combines <b>Hydrogen</b> and <b>Oxygen</b> to produce <b>Water</b> and <b>Electricity</b>.
			tech = electrics6
			mass = 0.045

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _GasFuelCell
			}
		}
 	}
}