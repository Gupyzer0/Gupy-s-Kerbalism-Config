// =========================================================
// Fuel Cells
// =========================================================

// From USI_FTT
Profile
{
	name = KerbalismSupport
	modname = BluedogDB
	moddir = Bluedog_DB

	Supply
	{
		resource = LqdHydrogen
		low_message = LH2 is almost depleted on $VESSEL@<i>Processes requiring LH2 will soon be unavailable</i>
		empty_message = There is no more LH2 on $VESSEL@<i>Processes requiring LH2 are no longer available</i>
		refill_message = $VESSEL LH2 storage refilled@<i>Processes requiring LH2 are now available</i>
	}

	Process
	{
		name = lqd hydrogen fuel cell
		modifier = _LH2FuelCell
		input = LqdHydrogen@0.0012702893
		input = Oxygen@0.5065967413
		output = Water@0.0008043014
		output = ElectricCharge@2.4026694940
		dump = Water
	}
}

// ============================================================================
// Add LqdHydrogen to Fuel cells
// ============================================================================
@PART[bluedog_Apollo_Block2_SM|bluedog_BigG_ConicSM_CargoModule|bluedog_Gemini_ArrowSM|bluedog_Gemini_EquipmentModule|bluedog_Gemini_LunarReconSM|bluedog_Agena_EngineShroud|bluedog_Agena_EquipmentRack]:HAS[@MODULE[Configure|bluedog_MOL_EquipmentSection]:HAS[!SETUP[LH2?Oxygen?Fuel?Cell]]]:NEEDS[FTT,ProfileDefault]:AFTER[UmbraSpaceIndustries]
{
	MODULE
	{
		name = ProcessController
		resource = _LH2FuelCell
		title = LH2+O2 fuel cell
		capacity = 1
	}

	@MODULE[Configure]
	{
		SETUP
		{
			name = LH2 Oxygen Fuel Cell
			desc = Burns <b>Liquid Hydrogen</b> and <b>Oxygen</b> gas, producing <b>Water</b> as a by-product.
			tech = advFuelSystems

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _LH2FuelCell
			}
		}
	}
}

// ============================================================================
// Pseudo-resources used by Kerbalism support for BluedogDB
// ============================================================================
RESOURCE_DEFINITION:NEEDS[FTT,ProfileDefault]
{
	name = _LH2FuelCell
	density = 0.0
	isVisible = false
}