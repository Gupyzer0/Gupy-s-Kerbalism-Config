// =========================================================
// Fuel Cells
// =========================================================

// Including fuel cells to those BDB parts that need them.
@PART[bluedog_MiniLab_Adapter|bluedog_Biosat_Adapter|bluedog_Apollo_Block2_SM|bluedog_MOL_EquipmentSection|bluedog_Agena_EquipmentRack|bluedog_Agena_EngineShroud|bluedog_Gemini_EquipmentModule|bluedog_Gemini_LunarReconSM|bluedog_Gemini_Service_A|bluedog_Gemini_ArrowSM|bluedog_BigG_CylindricalSM_CargoModule|bluedog_BigG_ConicSM_CargoModule|bluedog_LM_Ascent_Cockpit|bluedog_LM_Taxi|bluedog_LM_Lab|bluedog_LM_Shelter|bluedog_MOL_EquipmentSection]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
	// Removing BDB's default fuel cells including the B9 part switch for the fuel cells
	!MODULE[ModuleResourceConverter] {}
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelCellSwitch] {}

	MODULE
	{
		name = ProcessController
		resource = _FuelCell
		title = #KERBALISM_H2O2FuelCell_title//H2+O2 fuel cell
		capacity = 1
		valve_i = 1 // workaround until we have a better way to deal with dump valves
	}

	MODULE
	{
		name = ProcessController
		resource = _MonopropFuelCell
		title = #KERBALISM_MonopropO2FuelCell_title//Monoprop+O2 fuel cell
		capacity = 5
	}
	
	MODULE
	{
		name = Configure
		title = Fuel Cell
		slots = 1

		SETUP
		{
			name = Hydrogen Oxygen Fuel Cell
			desc = #KERBALISM_H2O2FuelCell_desc//Burns <b>Hydrogen</b> gas and <b>Oxygen</b> gas, producing <b>Water</b> as a by-product.

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCell
			}
		}

		SETUP
		{
			name = Monoprop Oxygen Fuel Cell
			desc = #KERBALISM_MonopropO2FuelCell_desc2//Burns <b>MonoPropellant</b> and <b>Oxygen</b> gas, producing <b>Water</b> and <b>Nitrogen</b> gas as by-products.
			tech = basicScience

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _MonopropFuelCell
			}
		}
	}
}
// =========================================================
// Capacity configs
// =========================================================

// ---------------------------------------------------------
// Agena
// ---------------------------------------------------------
@PART[bluedog_Agena_EquipmentRack|bluedog_Agena_EngineShroud]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[#resource[_FuelCell]]
	{
		%capacity = 2
	}

	@MODULE[ProcessController]:HAS[#resource[_MonopropFuelCell]]
	{
		%capacity = 5
	}
}

// ---------------------------------------------------------
// Gemini
// ---------------------------------------------------------

// "Small" Geminis
@PART[bluedog_Gemini_EquipmentModule|bluedog_Gemini_LunarReconSM]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[#resource[_FuelCell]]
	{
		%capacity = 2
	}

	@MODULE[ProcessController]:HAS[#resource[_MonopropFuelCell]]
	{
		%capacity = 5
	}
}

// "Big" Geminis
@PART[bluedog_Gemini_Service_A|bluedog_Gemini_ArrowSM|bluedog_BigG_CylindricalSM_CargoModule|bluedog_BigG_ConicSM_CargoModule]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[#resource[_FuelCell]]
	{
		%capacity = 3
	}

	@MODULE[ProcessController]:HAS[#resource[_MonopropFuelCell]]
	{
		%capacity = 5
	}
}

// ---------------------------------------------------------
// Apollo Service module
// ---------------------------------------------------------
@PART[bluedog_Apollo_Block2_SM]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[#resource[_FuelCell]]
	{
		%capacity = 3
	}

	@MODULE[ProcessController]:HAS[#resource[_MonopropFuelCell]]
	{
		%capacity = 5
	}
}

// ---------------------------------------------------------
// Lunar Modules
// ---------------------------------------------------------

// "Short" lived LMs
@PART[bluedog_LM_Ascent_Cockpit|bluedog_LM_Taxi]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[#resource[_FuelCell]]
	{
		%capacity = 2
	}

	@MODULE[ProcessController]:HAS[#resource[_MonopropFuelCell]]
	{
		%capacity = 5
	}
}

// Heavy duty LMs
@PART[bluedog_LM_Lab|bluedog_LM_Shelter]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[#resource[_FuelCell]]
	{
		%capacity = 3
	}

	@MODULE[ProcessController]:HAS[#resource[_MonopropFuelCell]]
	{
		%capacity = 5
	}
}

// ---------------------------------------------------------
// MOL
// ---------------------------------------------------------
@PART[bluedog_MOL_EquipmentSection]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[#resource[_FuelCell]]
	{
		%capacity = 5
	}

	@MODULE[ProcessController]:HAS[#resource[_MonopropFuelCell]]
	{
		%capacity = 10
	}
}

// ---------------------------------------------------------
// Return to Monke
// ---------------------------------------------------------
@PART[bluedog_MiniLab_Adapter|bluedog_Biosat_Adapter]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
	@MODULE[ProcessController]:HAS[#resource[_FuelCell]]
	{
		%capacity = 2
	}

	@MODULE[ProcessController]:HAS[#resource[_MonopropFuelCell]]
	{
		%capacity = 5
	}
}
