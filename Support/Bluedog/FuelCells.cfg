// =========================================================
// Fuel Cells
// ---------------------------------------------------------
// Including fuel cells to those BDB parts that need them.
// 
// - bluedog_MiniLab_Adapter
// - bluedog_Biosat_Adapter
// - bluedog_Apollo_Block2_SM
// - bluedog_MOL_EquipmentSection
// - bluedog_Agena_EquipmentRack
// - bluedog_Agena_EngineShroud
// - bluedog_Gemini_EquipmentModule
// - bluedog_Gemini_LunarReconSM
// - bluedog_Gemini_Service_A
// - bluedog_Gemini_ArrowSM
// - bluedog_BigG_CylindricalSM_CargoModule
// - bluedog_BigG_ConicSM_CargoModule
// - bluedog_LM_Ascent_Cockpit
// - bluedog_LM_Taxi
// - bluedog_LM_Lab
// - bluedog_LM_Shelter
// - bluedog_MOL_EquipmentSection
// =========================================================

@PART[bluedog_MiniLab_Adapter|bluedog_Biosat_Adapter|bluedog_Apollo_Block2_SM|bluedog_MOL_EquipmentSection|bluedog_Agena_EquipmentRack|bluedog_Agena_EngineShroud|bluedog_Gemini_EquipmentModule|bluedog_Gemini_LunarReconSM|bluedog_Gemini_Service_A|bluedog_Gemini_ArrowSM|bluedog_BigG_CylindricalSM_CargoModule|bluedog_BigG_ConicSM_CargoModule|bluedog_LM_Ascent_Cockpit|bluedog_LM_Taxi|bluedog_LM_Lab|bluedog_LM_Shelter|bluedog_MOL_EquipmentSection]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
	// Removing BDB's default fuel cells including the B9 part switch for the fuel cells
	!MODULE[ModuleResourceConverter] {}
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelCellSwitch]] {}

	MODULE
	{
		name = ProcessController
		resource = _FuelCell
		title = #KERBALISM_H2O2FuelCell_title//H2+O2 fuel cell
		capacity = 1
		valve_i = 1 // workaround until we have a better way to deal with dump valves
	}

	MODULE
	{
		name = ProcessController
		resource = _MonopropFuelCell
		title = #KERBALISM_MonopropO2FuelCell_title//Monoprop+O2 fuel cell
		capacity = 5
	}

	MODULE:NEEDS[CryoTanks]
	{
		name = ProcessController
		resource = _LH2FuelCell
		title = LH2+O2 fuel cell
		capacity = 6
	}

	MODULE:NEEDS[HypergolicBDB]
	{
		name = ProcessController
		resource = _HypergolicFuelCell
		title = Hypergolic Fuel Cell
		capacity = 1
	}
	
	MODULE
	{
		name = Configure
		title = Fuel Cell
		slots = 1

		SETUP
		{
			name = Hydrogen Oxygen Fuel Cell
			desc = #KERBALISM_H2O2FuelCell_desc//Burns <b>Hydrogen</b> gas and <b>Oxygen</b> gas, producing <b>Water</b> as a by-product.

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _FuelCell
			}
		}

		SETUP
		{
			name = Monoprop Oxygen Fuel Cell
			desc = #KERBALISM_MonopropO2FuelCell_desc2//Burns <b>MonoPropellant</b> and <b>Oxygen</b> gas, producing <b>Water</b> and <b>Nitrogen</b> gas as by-products.
			tech = basicScience

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _MonopropFuelCell
			}
		}

		SETUP:NEEDS[CryoTanks]
		{
			name = LH2 Oxygen Fuel Cell
			desc = Burns <b>Liquid Hydrogen</b> and <b>Oxygen</b> gas, producing <b>Water</b> as a by-product.
			tech = advFuelSystems

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _LH2FuelCell
			}
		}

		SETUP:NEEDS[HypergolicBDB]
		{
			name = Hypergolic Fuel Cell
			desc = A fuel cell which reacts <b>Aerozine50</b> and <b>NitrogenTetroxide</b> to produce <b>ElectricCharge</b>.
			tech = basicScience

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _HypergolicFuelCell
			}
		}
	}
}