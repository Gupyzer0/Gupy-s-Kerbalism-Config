// =========================================================
// Resources
// ----------
// Food, Oxygen, Water . . .
// =========================================================

// For getting the quantities of resources we'll be using kerbalism profile.
// This of course is experimental for now . . .
//
// Hydrogen: Multiply the weight of the H2 containers by 700
// Oxygen:
//         - Fuel cells: Multiply the weight of the O2 containers by 200
//         - For crew: 37.4 per day
// Food: 0.27/crewmember of food per day

// ---------------------------------------------------------
// Mercury
// ---------------------------------------------------------
// Oxygen
// - Give 30 hours of oxygen
// Batteries
// - GIve 30 hours of batteries

// ---------------------------------------------------------
// Gemini
// ---------------------------------------------------------
// http://geminiguide.com/Systems/electrical.html
//
// Hydrogen 
// - Long duration: 10.2 kg - 7140
// - Short duration: 2.6 Kg - 1820
//
// Oxygen
// - Long duration: 48.08 Kg - 9616
// - Short duration: 20.8 Kg - 4160
// 
// EC: Give Gemini a day of EC without fuel cells active.

// ---------------------------------------------------------
// Apollo
// ---------------------------------------------------------

// Command Module
@PART[bluedog_Apollo_CrewPod|bluedog_Apollo_CrewPod_5crew]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
    // 14 days of food for 3 crewmembers, the 5 crew version will have the same amount of food,
    // so you'll need some extra habitat / tanks for long duration missions.
    @RESOURCE[Food]
    {
        @amount = 9.72
        @maxAmount = 9.72
    }
}

// Block 2 Service Module
@PART[bluedog_Apollo_Block2_SM]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
    //TODO: test endurance
    // 147.8 Kg of O2 in 2 tanks
	RESOURCE
	{
		name = Oxygen
		amount = 29560
		maxAmount = 29560
	}

    // 26.3 Kg of H2 in 2 tanks
	RESOURCE
	{
		name = Hydrogen
		amount = 18410
		maxAmount = 18410
	}
}

// Block 3 Service Module
@PART[bluedog_Apollo_Block3_SM]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
    // 147.8 Kg of O2 in 2 tanks
	RESOURCE
	{
		name = Oxygen
		amount = 29560
		maxAmount = 29560
	}

    // TODO: test ->  Gotta test the EC charge for at least 5 days
    @RESOURCE[ElectricCharge]
    {
        @amount = 250
        @maxAmount = 250
    }
}

// Lunar module
@PART[bluedog_LM_Ascent_Cockpit]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
    // TODO: test -> Just what the Apollo config
    @RESOURCE[ElectricCharge]
	{
		@amount *= 1.7
		@maxAmount *= 1.7
	}
}

// ============================================================================
// Probes . . .
// ============================================================================

// ----------------------------------------------------------------------------
// Give early IDCSP relay more EC to survive more than 5 minutes in the dark
// but not too much, and do not increase the solar panel output
// by Gordon Dry
// ----------------------------------------------------------------------------
@PART[bluedog_IDCSP_Probe]:NEEDS[Bluedog_DB,FeatureScience]:FOR[zzzKerbalismDefault]
{
	@RESOURCE[ElectricCharge]
	{
		@amount = 12 // old value 5, enough for about 8 minutes, so now about 20 minutes
		@maxAmount = 12
	}
}

// ----------------------------------------------------------------------------
// Giving less EC consumption for extending the battery life of:
// Explorer1, Beacon1 and Pioneer 1 and 4 probes as they don't have
// solar panels nad require to stay alive for some time.
// ----------------------------------------------------------------------------
@PART[bluedog_Pioneer_1|bluedog_Pioneer_4|bluedog_Juno1_Explorer1|bluedog_Beacon1]:NEEDS[Bluedog_DB,FeatureScience]:FINAL
{
	@MODULE[ModuleCommand]
	{
		@RESOURCE[ElectricCharge]
		{
			@rate = 0.0005
		}
	}
}

// ============================================================================
// Launch clamps
// ============================================================================

@PART[BDB_FASAlaunchTower|BDB_FASAUmbilicalTower|BDB_FASAlaunchClamp25|BDB_FASAlaunchClamp125|BDB_FASAlaunchClampApollo|BDB_FASAlaunchClampAtlas]:NEEDS[ProfileDefault]:FOR[KerbalismDefault]
{
	MODULE
	{
		name = ProcessController
		resource = _ECGen
		title = #KERBALISM_PowerSupply_title//Power supply
		capacity = 1.0
		running = true
		toggle = false
	}

	!MODULE[ModuleGenerator] {}
}
