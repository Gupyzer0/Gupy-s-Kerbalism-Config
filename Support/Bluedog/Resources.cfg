// =========================================================
// Resources
// ----------
// Food, Oxygen, Water . . .
// =========================================================

// ---------------------------------------------------------
// Mercury
// ---------------------------------------------------------
// Oxygen
// - Give 30 hours of oxygen
// Batteries
// - Give 30 hours of batteries

@PART[bluedog_Mercury_Capsule]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
    // TODO: test these values . . .

    // Food for a day
    RESOURCE
	{
		name = Food
		amount = 1.35
		maxAmount = 1.35
	}

    RESOURCE
	{
		name = Oxygen
		amount = 50
		maxAmount = 50
	}

    @RESOURCE[ElectricCharge]
    {
        @amount = 5000
        @maxAmount = 5000
    }
}

// ---------------------------------------------------------
// Gemini
// ---------------------------------------------------------
// http://geminiguide.com/Systems/electrical.html
//
// Hydrogen / Oxygen
// - Long duration: 14 days
// - Short duration: 5 days
//
// EC: Give Gemini a day of EC without fuel cells active.

// Command Modules
@PART[bluedog_Gemini_Capsule]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
    // 14 days of food for 2 crewmembers
    RESOURCE
	{
		name = Food
		amount = 6.48
		maxAmount = 6.48
	}
}

//bluedog_BigG_Cabin

// Service Modules
@PART[bluedog_Gemini_EquipmentModule]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
    //TODO: test endurance of at least 14 days
	RESOURCE
	{
		name = Oxygen
		amount = 20000
		maxAmount = 30000
	}

	RESOURCE:NEEDS[!CryoTanks]
	{
		name = Hydrogen
		amount = 12700
		maxAmount = 12700
	}

    RESOURCE:NEEDS[CryoTanks]
	{
		name = LqdHydrogen
		amount = 12700
		maxAmount = 12700
	}
}

// bluedog_Gemini_ArrowSM
// bluedog_Gemini_RumbleSeat
// bluedog_Gemini_LunarReconSM
// bluedog_Shuguang_EquipmentModule
// bluedog_Gemini_Service_A
// bluedog_BigG_CylindricalSM_CargoModule
// bluedog_BigG_ConicSM_CargoModule

// ---------------------------------------------------------
// Apollo
// ---------------------------------------------------------

// Command Module
@PART[bluedog_Apollo_CrewPod|bluedog_Apollo_CrewPod_5crew]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
    // 14 days of food for 3 crewmembers, the 5 crew version will have the same amount of food,
    // so you'll need some extra habitat / tanks for long duration missions.
    RESOURCE
	{
		name = Food
		amount = 9.72
		maxAmount = 9.72
	}
}

// Block 2 Service Module
@PART[bluedog_Apollo_Block2_SM]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
    //TODO: test endurance of at least 14 days
	RESOURCE
	{
		name = Oxygen
		amount = 30000
		maxAmount = 30000
	}

	RESOURCE:NEEDS[!CryoTanks]
	{
		name = Hydrogen
		amount = 19000
		maxAmount = 19000
	}

    RESOURCE:NEEDS[CryoTanks]
	{
		name = LqdHydrogen
		amount = 19000
		maxAmount = 19000
	}
}

// Block 3 Service Module
@PART[bluedog_Apollo_Block3_SM]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
    
    // Oxygen for five days for five crewmembers
	RESOURCE
	{
		name = Oxygen
		amount = 935
		maxAmount = 935
	}

    // TODO: test ->  Gotta test the EC charge for at least 5 days
    // Try 14500 with Scrubber and Pressure control only
    @RESOURCE[ElectricCharge]
    {
        @amount = 14500
        @maxAmount = 14500
    }
}

// Lunar module
@PART[bluedog_LM_Ascent_Cockpit]:NEEDS[Bluedog_DB]:AFTER[KerbalismDefault]
{
    // TODO: Test
    // Normal: 48 Hours
    // Extended: 75 Hours

    @RESOURCE[ElectricCharge]
	{
		@amount = 9075
		@maxAmount = 9075
	}
}

// ============================================================================
// Probes . . .
// ============================================================================

// ----------------------------------------------------------------------------
// Give early IDCSP relay more EC to survive more than 5 minutes in the dark
// but not too much, and do not increase the solar panel output
// by Gordon Dry
// ----------------------------------------------------------------------------
@PART[bluedog_IDCSP_Probe]:NEEDS[Bluedog_DB,FeatureScience]:FOR[zzzKerbalismDefault]
{
	@RESOURCE[ElectricCharge]
	{
		@amount = 12 // old value 5, enough for about 8 minutes, so now about 20 minutes
		@maxAmount = 12
	}
}

// ----------------------------------------------------------------------------
// Giving less EC consumption for extending the battery life of:
// Explorer1, Beacon1 and Pioneer 1 and 4 probes as they don't have
// solar panels nad require to stay alive for some time.
// ----------------------------------------------------------------------------
@PART[bluedog_Pioneer_1|bluedog_Pioneer_4|bluedog_Juno1_Explorer1|bluedog_Beacon1]:NEEDS[Bluedog_DB,FeatureScience]:FINAL
{
	@MODULE[ModuleCommand]
	{
		@RESOURCE[ElectricCharge]
		{
			@rate = 0.0005
		}
	}
}

// ============================================================================
// Launch clamps
// ============================================================================

@PART[BDB_FASAlaunchTower|BDB_FASAUmbilicalTower|BDB_FASAlaunchClamp25|BDB_FASAlaunchClamp125|BDB_FASAlaunchClampApollo|BDB_FASAlaunchClampAtlas]:NEEDS[ProfileDefault]:FOR[KerbalismDefault]
{
	MODULE
	{
		name = ProcessController
		resource = _ECGen
		title = #KERBALISM_PowerSupply_title//Power supply
		capacity = 1.0
		running = true
		toggle = false
	}

	!MODULE[ModuleGenerator] {}
}
